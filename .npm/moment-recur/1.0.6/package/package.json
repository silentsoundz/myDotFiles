{"name":"moment-recur","version":"1.0.6","description":"A momentjs plugin for matching and generating recurring dates.","main":"moment-recur.js","repository":{"type":"git","url":"git+https://github.com/c-trimm/moment-recur.git"},"keywords":["momentjs","date","recur"],"author":{"name":"Casey Trimm"},"license":"Unlicense","devDependencies":{"gulp":"~3.8.10","karma":"~0.12.31","karma-chrome-launcher":"~0.1.7","run-sequence":"~1.0.2","gulp-uglifyjs":"~0.5.0","jasmine-core":"~2.1.3","karma-jasmine":"~0.3.4"},"scripts":{"test":"gulp test"},"gitHead":"f147ef27bbc26ca67638385f3db4a44084c76626","readme":"moment-recur\r\n=====\r\nmoment-recur is a recurring date plugin for [momentjs](http://momentjs.com/). This plugin handles dates only; time information is discarded.\r\n\r\nThe rule matching concept is borrowed from the excellent [node-date-recur](https://github.com/appsattic/node-date-recur) library created by Andrew Chilton.\r\n\r\n```js\r\nvar rInterval = moment( \"01/01/2014\" ).recur().every(2).days();\r\nrInterval.matches( \"01/03/2014\" ); // true\r\n\r\nvar rCalendar = moment.recur().every(10).dayOfMonth();\r\nrCalendar.matches( \"05/10/2014\" ); // true\r\n```\r\n\r\n\r\n\r\nGetting Started\r\n---------------\r\nmoment-recur can be included in your project a few different ways.\r\n\r\n### Browser\r\nSimply include the momentjs script, then the moment-recur script.\r\n```html\r\n<script src=\"moment.min.js\"></script>\r\n<script src=\"moment-recur.js\"></script>\r\n```\r\n\r\n\r\n### Browser with RequireJS\r\nmoment-recur also works with RequireJS. Include it just like any other script.\r\n```js\r\ndefine([\"moment\", \"moment-recur\"], function(moment){\r\n    //you probably won't need a reference to moment-recur itself, so include it last.\r\n});\r\n```\r\n\r\n\r\n### Bower\r\nmoment-recur is a register bower component.\r\n```\r\nbower install moment-recur\r\n```\r\n\r\n\r\n### node.js\r\nmoment-recur can be installed with npm and required into a script.\r\n```\r\nnpm install moment-recur\r\n```\r\n\r\n```js\r\nvar moment = require('moment');\r\nrequire('moment-recur');\r\n```\r\n\r\n\r\nCreating a Recurring Date\r\n-------------------------\r\nYou can create a recurrence from an instance of moment or from the constructor a few different ways.  \r\n\r\nFrom an instance:\r\n```js\r\nvar recurrence;\r\n\r\n// Create a recurrence using today as the start date.\r\nrecurrence = moment().recur();\r\n\r\n// Create a recurrence while passing the start and end dates to the recur function.\r\n// Note: passing an end date requires you to also pass a start date.\r\nrecurrence = moment().recur( start, end );\r\n\r\n// You may pass a start date to the moment, or use an existing moment, to set the start date.\r\n// In this case, passing a date to the recur function sets and end date.\r\nrecurrence = moment(start).recur( end );\r\n\r\n// Finally, you can create a recurrence and pass in an entire set of options.\r\nrecurrence = moment().recur({\r\n    start: \"01/01/2014\",\r\n    end: \"01/01/2015\"\r\n});\r\n```\r\n\r\nFrom the constructor:\r\n```js\r\nvar recurrence;\r\n\r\n// Create recurrence without a start date. Note: this will not work with intervals.\r\nrecurrence = moment.recur();\r\n\r\n// Create a recurrence, passing just the start, or the start and end dates.\r\nrecurrence = moment.recur( start, end );\r\n\r\n// Create a recurrence, passing set of options.\r\nrecurrence = moment.recur({\r\n    start: \"01/01/2014\",\r\n    end: \"01/01/2015\"\r\n});\r\n```\r\n\r\nCreating Rules\r\n--------------\r\nmoment-recur uses rules to define when a date should recur. You can then generate future or past recurrences based on these rules, or see if a specific date matches the rules. Rules can also be overridden or removed.\r\n\r\n\r\n### The every() Function\r\nThe `every()` function allows you to set the units and, optionally, the measurment type of the recurring date. It returns the recur object to allow chaining.\r\n\r\n```js\r\nvar myDate, recurrence;\r\n\r\n// Create a date to start from\r\nmyDate = moment(\"01/01/2014\");\r\n\r\n// You can pass the units to recur on, and the measurement type.\r\nrecurrence = myDate.recur().every(1, \"days\");\r\n\r\n// You can also chain the measurement type instead of passing it to every.\r\nrecurrence = myDate.recur().every(1).day();\r\n\r\n// It is also possible to pass an array of units.\r\nrecurrence = myDate.recur().every([3, 5]).days();\r\n\r\n// When using the dayOfWeek measurement, you can pass days names.\r\nrecurrence = myDate.recur().every([\"Monday\", \"wed\"]).daysOfWeek();\r\n\r\n// Month names also work when using monthOfYear.\r\nrecurrence = myDate.recur().every([\"Jan\", \"february\"], \"monthsOfYear\");\r\n```\r\n\r\n`every()` will override the last \"every\" if a measurement was not provided. The following line will create a recurrence for every 5 days.\r\n```js\r\nrecurrence  = myDate.recur().every(1).every(5).days();\r\n```\r\nIf you need to specify multiple units, pass an array to `every()`.\r\n\r\nYou may also pass the units directly to the interval functions (listed below) instead of using `every()`.\r\n```js\r\nvar recurrence = moment.recur().monthOfYear(\"January\");\r\n```\r\n\r\n### Length Intervals\r\nmoment-recur supports intervals for days, weeks, months, and years. Measurements may be singular or plural (ex: `day()` vs `days()`). Length Intervals **must** have a start date defined.\r\n\r\nPossible Length Intervals Include:\r\n* day / days\r\n* week / weeks\r\n* month / months\r\n* year / years\r\n\r\n#### Examples\r\n```js\r\nvar myDate, interval;\r\n\r\n// Create a date to start from\r\nmyDate = moment(\"01/01/2014\");\r\n\r\n// A daily interval - will match every day.\r\ninterval = myDate.recur().every(1).day();\r\n\r\n// A bi-weekly interval - will match any date that is exactly 2 weeks from myDate.\r\ninterval = myDate.recur().every(2).weeks();\r\n\r\n// A quarterly interval - will match any date that is exactly 3 months from myDate.\r\ninterval = myDate.recur().every(3).months();\r\n\r\n// A yearly interval - will match any date that is exactly 1 year from myDate.\r\ninterval = myDate.recur().every(1).years();\r\n\r\n// It is possible to match multiple units of a single measure using an array.\r\ninterval = myDate.recur().every([3, 5]).days();\r\n\r\n// It is NOT possible to create compound intervals. The following will never match.\r\ninterval = myDate.recur().every(3).days().every(2).months(); // Won't work\r\n```\r\n\r\n\r\n### Calendar Intervals\r\nCalendar Intervals do not depend on a start date. They define a unit of another unit. For instance, a day of a month, or a month of a year. Measurements may be singular or plural (ex: `dayOfMonth()` vs `daysOfMonth()`).\r\n\r\nPossible Calendar Intervals Include:\r\n* dayOfWeek / daysOfWeek\r\n* dayOfMonth / daysOfMonth\r\n* weekOfMonth / weeksOfMonth\r\n* weekOfYear / weeksOfYear\r\n* monthOfYear / monthsOfYear\r\n\r\n#### Examples\r\n```js\r\nvar cal;\r\n\r\n// Will match any date that is on Sunday or Monday.\r\ncal = moment.recur().every([\"Sunday\", 1]).daysOfWeek();\r\n\r\n// Will match any date that is the first or tenth day of any month.\r\ncal = moment.recur().every([1, 10]).daysOfMonth();\r\n\r\n// Will match any date that is in the first or third week of any month.\r\ncal = moment.recur().every([1, 3]).weeksOfMonth();\r\n\r\n// Will match any date that is in the 20th week of any year.\r\ncal = moment.recur().every(20).weekOfYear();\r\n\r\n// Will match any date that is in January of any year.\r\ncal = moment.recur().every(\"January\").monthsOfYear();\r\n\r\n// You can also combine these rules to match specific dates.\r\n// For instance, this will match only on Valentines day\r\nvar valentines = moment.recur().every(14).daysOfMonth()\r\n                               .every(\"Februray\").monthsOfYear();\r\n\r\n// A weekOfMonthByDay interval is available for combining with\r\n// the daysOfWeek to achieve \"nth weekday of month\" recurrences.\r\n// The following matches every 1st and 3rd Thursday of the month.\r\ncal = moment.recur().every(\"Thursday\").daysOfWeek()\r\n                    .every([0, 2]).weeksOfMonthByDay();\r\n```\r\n\r\n\r\nUsing the Rules\r\n---------------\r\n\r\n### Matching\r\nThe `matches()` function will test a date to check if all of the recurrence rules match. It returns `true` if the date matches, `false` otherwise.\r\n```js\r\nvar interval = moment(\"01/01/2014\").recur().every(2).days();\r\ninterval.matches(\"01/02/2014\"); // false\r\ninterval.matches(\"01/03/2014\"); // true\r\n```\r\n\r\nYou may also see if a date matches before the start date or after the end date by passing `true` as the second argument to `matches()`.\r\n```js\r\nvar interval = moment(\"01/01/2014\").recur().every(2).days();\r\ninterval.matches(\"12/30/2013\"); // false\r\ninterval.matches(\"12/30/2013\", true); // true\r\n```\r\n\r\n\r\n### Exceptions\r\nTo prevent a date from matching that would normally match, use the `except()` function.\r\n\r\n```js\r\nvar recurrence = moment(\"01/01/2014\").recur().every(1).day().except(\"01/02/2014\");\r\nrecurrence.matches(\"01/02/2014\"); // false\r\n```\r\n\r\n\r\n### Overriding and Forgetting\r\nIf a rule is created with the same measurement of a previous rule, it will override the previous rule. Rules can also be removed from a recurrence.\r\n\r\n```js\r\n// Create a recurrence that matches every day, with an exception\r\nvar recurrence = moment(\"01/01/2014\").recur().every(1).day().except(\"01/03/2014\");\r\n\r\n// This will override the previous rule and match every 2 days instead.\r\nrecurrence.every(2).days();\r\n\r\n// Exceptions can also be removed by passing a date to the forget() function.\r\nrecurrence.forget(\"01/03/2014\");\r\n\r\n// Rules can be removed by passing the measurement to the forget() function.\r\nrecurrence.forget(\"days\");\r\n```\r\n\r\n\r\n### Generating Dates\r\nIt is also possible to generate dates from the rules. These functions require a starting date.\r\n\r\n```js\r\nvar recurrence, nextDates;\r\n\r\n// Create a recurrence\r\nrecurrence = moment(\"01/01/2014\").recur().every(2).days();\r\n\r\n// Generate the next three dates as moments\r\n// Outputs: [moment(\"01/03/2014\"), moment(\"01/05/2014\"), moment(\"01/07/2014\")]\r\nnextDates = recurrence.next(3); \r\n\r\n// Generate the next three dates, formatted in local format\r\n// Outputs: [\"01/03/2014\", \"01/05/2014\", \"01/07/2014\"]\r\nnextDates = recurrence.next(3, \"L\");\r\n\r\n// Generate previous three dates, formatted in local format\r\n// Outputs: [\"12/30/2013\", \"12/28/2013\", \"12/26/2013\"]\r\nnextDates = recurrence.previous(3, \"L\");\r\n```\r\n\r\nIf your recurrence does not have a start date set, or if it does but you want to start at a different date, use the `fromDate()` method first.\r\n```js\r\nvar recurrence = moment(\"01/01/2014\").recur().every(2).days();\r\nrecurrence.fromDate(\"02/05/2014\");\r\n\r\n// Outputs: [\"02/06/2014\", \"02/08/2014\", \"02/10/2014\"]\r\nnextDates = recurrence.next(3, \"L\");\r\n```\r\n\r\nWith both a start date and an end date set, you can generate all dates within that range that match the pattern (including the start/end dates).\r\n```js\r\nvar recurrence = moment().recur(\"01/01/2014\", \"01/07/2014\").every(2).days();\r\n\r\n// Outputs: [\"01/01/2014\", \"01/03/2014\", \"01/05/2014\", \"01/07/2014\"]\r\nallDates = recurrence.all(\"L\");\r\n```\r\n\r\n\r\n**Important Note:** These functions may be very inefficient/slow. They work by attempting to match every date from the start of a range until the desired number of dates have been generated. So if you attempt to get 10 dates for a rule that matches once a year, it will run the match function for ~3650 days.\r\n\r\n\r\nOptions and Other Methods\r\n-------------------------\r\nmoment-recur provides a few methods for getting/setting options, as well as two utility methods. It also creates two additional momentjs functions.\r\n\r\n### Options\r\nOptions can be set when creating a recurrence or using the getter/setter methods listed below.\r\n\r\nSet options upon creation. Note that the units for rules are converted to objects, so it is not recommended to set rules this way. They can be set in the options so that they can be imported.\r\n```js\r\nmoment().recur({\r\n    start: \"01/01/2014\",\r\n    end: \"12/31/2014\",\r\n    rules: [\r\n        { units: {  2 : true }, measure: \"days\" }\r\n    ],\r\n    exceptions: [\"01/05/2014\"]\r\n});\r\n```\r\n\r\nGet/Set the Start Date\r\n```js\r\nrecurrence.startDate(); // Get\r\nrecurrence.startDate(\"01/01/2014\"); // Set\r\n```\r\n\r\nGet/Set the End Date\r\n```js\r\nrecurrence.endDate(); // Get\r\nrecurrence.endDate(\"01/01/2014\"); // Set\r\n```\r\n\r\nGet/Set a temporary \"From Date\" for use with generating dates\r\n```js\r\nrecurrence.fromDate(); // Get\r\nrecurrence.fromDate(\"01/01/2014\"); // Set\r\n```\r\n\r\n### Utility Methods\r\nUse `repeats()` to check if a recurrence has rules set.\r\n```js\r\nrecurrence.repeats(); // true/false\r\n```\r\n\r\nUse `save()` to export all options, rules, and exceptions as an object. This can be used to store recurrences in a database.  \r\n**Note:** This does not export the \"From Date\" which is considered a temporary option.\r\n```js\r\nrecurrence.save();\r\n```\r\n\r\n### momentjs Functions\r\nThe `monthWeek()` method can be used to determine the week of the month a date is in.\r\n```js\r\nmoment(\"01/01/2014\").monthWeek(); // 0\r\n```\r\n\r\nThe `dateOnly()` method can be used to remove any time information from a moment.\r\n```js\r\nmoment(\"2014-01-01 09:30:26\").dateOnly(); // 01/01/2014 12:00:00 AM\r\n```\r\n\r\nLicense\r\n-------\r\nUNLICENSE - see UNLICENSE file and [unlicense.org](http://unlicense.org/) for details.\r\n","readmeFilename":"README.md","bugs":{"url":"https://github.com/c-trimm/moment-recur/issues"},"homepage":"https://github.com/c-trimm/moment-recur#readme","_id":"moment-recur@1.0.6","_shasum":"697ea6009853e4948539cb4eb24cfd4ad4c98ac0","_from":"git://github.com/habitrpg/moment-recur.git#f147ef27bbc26ca67638385f3db4a44084c76626","_resolved":"git://github.com/habitrpg/moment-recur.git#f147ef27bbc26ca67638385f3db4a44084c76626"}